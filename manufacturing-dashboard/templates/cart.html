{% extends "base.html" %}
{% block content %}
<h2>Your cart</h2>
{% if cart %}
  <table class="table">
    <thead><tr><th>Product</th><th>Qty</th><th>Unit</th><th>Subtotal</th><th></th></tr></thead>
    <tbody>
      {% for pid, qty in cart.items() %}
        {% set p = products[pid|int] %}
        <tr>
          <td>{{ p.name }}</td>
          <td>{{ qty }}</td>
          <td>${{ '%.2f'|format(p.unit_price) }}</td>
          <td>${{ '%.2f'|format(p.unit_price * qty) }}</td>
          <td><a class="link" href="{{ url_for('cart_remove', product_id=pid) }}">Remove</a></td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
  <p><strong>Total:</strong> ${{ '%.2f'|format(total) }}</p>
  <form method="post" action="{{ url_for('order_review') }}">
    <button class="btn" type="submit">Proceed to place order</button>
  </form>
{% else %}
  <p>Your cart is empty.</p>
{% endif %}
{% endblock %}
